
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>
    
  程序构建 - 
  

  </title>
  <meta name="author" content="">
  <meta name="description" content="">

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  
  <link href="asset/css/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="atom.xml" rel="alternate" title="" type="application/atom+xml">
  <script src="asset/js/modernizr-2.0.js"></script>
  <script src="asset/js/jquery.min.js"></script>
  <script src="asset/highlightjs/highlight.pack.js"></script>
  <link href="asset/highlightjs/styles/solarized_light.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script>hljs.initHighlightingOnLoad();</script>

  <style type="text/css">
  .cat-children-p{ padding: 6px 0px;}
  .hljs{background: none;}
  </style>
  <script type="text/javascript">
  var isAddSildbar = true;
  </script>
  <script src="asset/js/octopress.js" type="text/javascript"></script>
</head>
<script type="text/javascript">
//链接新开窗口
function addBlankTargetForLinks () {
  $('a[href^="http"]').each(function(){
      $(this).attr('target', '_blank');
  });
}
$(document).ready(function(event) {
  addBlankTargetForLinks();
});
</script>
<body   >
  <header role="banner"><hgroup>
  <h1><a href="index.html"></a></h1>
  
    <h2></h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">

  <li id=""><a target="self" href="index.html">Home</a></li>

  <li id=""><a target="_self" href="archives.html">Archives</a></li>

</ul>

</nav>
  <div id="main">
    <div id="content"> 
<div class="blog-index">

	<article>
		 <header>
		  	<h1 class="entry-title"><a href="15143577543811.html">Sku选项可用判断</a></h1>
			<p class="meta"><time datetime="2017-12-27T14:55:54+08:00" 
			pubdate data-updated="true">2017/12/27</time></p>
		 </header>
	  	<div class="entry-content">
		  	
		  	<p><strong>sku选项改变之后动态的判断其余的sku选项是否可用</strong></p>

<h3 id="toc_0">判断前提</h3>

<ul>
<li>一个sku由3个选项组成
SkuMap: {
sku1: a1;b2;c1
sku2: a2;b3;c2
sku3: a3;b1;c3
}</li>
<li>选项可用的判断的条件：

<ul>
<li>sku的选项可以生成一个SkuOptionSet()={a1;b2;c1}</li>
<li>假如当前选中了a1,SelectOption：{a1}</li>
<li>如果要判断c1是否可用,MatchOption为{a1;c1}，遍历SkuMap中所有的Sku假如任一SkuOptionSet.contains(MatchOption),则表示待判断的OptionVal c1可用</li>
</ul></li>
</ul>

<h3 id="toc_1">判断过程</h3>

<ol>
<li>假设当前的选项有如下几个：
A:<strong><em>a1</em></strong> a2 a3
B:b1 <strong><em>b2</em></strong> b3
C:c1 c2 c3</li>
</ol>

<p>2.假设当前选 a1,b2:</p>

<pre><code> 2.1.获取当前选中 a1,b2 作为 select option
 2.2.使用select option和需要判断可用的项组成MatchOption，
     使用MatchOption对所有sku进行匹配，
     有任一sku匹配到此Option组合，则表示待判断的Option是可用的
 2.3. MatchOption如果包含了已经选中的项，需要把已经选中项提出：
     * 判断 a 选项 a2 可用时:
       match option（A:a1;B:b2;A:a2）去除已选中的A:a1后为:A:a1;B:b2;
     * 判断 b 选项 b1 可用时:
       match option（A:a1;B:b2;B:b1）去除已选中B:b2为:A:a1;B:b1;
     * 可以匹配到canbuy ture else false
</code></pre>

<ol>
<li>特殊情况：如果当前选项只有一个值，那么这个值默认选中</li>
</ol>

<h3 id="toc_2">这部分是 Android 判断部分的代码</h3>

<pre><code>public void updateValueCanUseInOption(long confirmGroupID) {

    List&lt;ConfirmOptionWrapper&gt; modelList = getModelList();

    // 获取当前有哪些选中项
    List&lt;ConfirmOptionWrapper&gt; currentItemOptionList = getModelList(confirmGroupID);

    // optionWraper 的option 和 optionValWraper中的option内存地址不一样,没有currentSelectVal
    Map&lt;String, String&gt; selOptionKSMap = getSelectOptionsKKVMap(currentItemOptionList, confirmGroupID);

    Set&lt;String&gt; matchOptionSet = new HashSet&lt;String&gt;();

    for (ConfirmOptionWrapper optionWrapper : modelList) {
        if (!optionWrapper.isOptionTxt() &amp;&amp; !optionWrapper.isOptionImg()) {
            continue;
        }
        if (CollectionsUtil.isListBlank(optionWrapper.optionValueWrappers)) {
            continue;
        }
        for (ConfirmOptionValueWrapper optionValueWrapper : optionWrapper.optionValueWrappers) {

            // 该选项是选中的item不用做可用判断,待判断item和点击触发的item不处于统一组时不做处理
            if (optionValueWrapper == optionWrapper.tmpSelecValWrapper || optionWrapper.confirmGroupID != confirmGroupID) {
                continue;
            }
            // 带判断item重置为默认
            optionValueWrapper.isCanBuy = false;
            matchOptionSet.clear();

            // 默认把选中Map中的KVSet赋值到MatchSet中
            for (Map.Entry&lt;String, String&gt; entry : selOptionKSMap.entrySet()) {
                matchOptionSet.add(entry.getValue());
            }
            //LogUtils.i(&quot;====== selOptionSet  is &quot; + matchOptionSet.toString());

            // 假如是匹配是当前Option在mactch set 中去除当前option 和 Vaule,得到匹配中的 matchOptionSetPre
            String optionKeyStr = optionValueWrapper.getOptionValKeyStr();
            if (selOptionKSMap.containsKey(optionKeyStr)) {
                String currentSelOption = selOptionKSMap.get(optionKeyStr);
                matchOptionSet.remove(currentSelOption);
            }
            //LogUtils.i(&quot;====== selOptionSet After Filter is &quot; + matchOptionSet.toString());

            // 由得到匹配中的selectOptionKVSet和判断项组成mactchSet
            String currentOptionKVStr = optionValueWrapper.getOptionValKVStr();
            matchOptionSet.add(currentOptionKVStr);
            //LogUtils.i(&quot;====== matchOptionSet is &quot; + matchOptionSet.toString());
            // skuMap中假如有任一sku 的option set 匹配mactchset 则返回可用,循环判断每一个项
            optionValueWrapper.isCanBuy = isOptionSetCanMatchInSkuMap(matchOptionSet,optionWrapper);
            //  LogUtils.w(&quot;=====&quot; + optionValueWrapper.optionValue.value + &quot;:&quot; +optionValueWrapper.optionValue.opNameId + &quot;:&quot; +optionValueWrapper.optionValue.opValueId +&quot; wrapper.isCanBuy is :&quot; + optionValueWrapper.isCanBuy);
        }
    } // end: ConfirmOptionWrapper optionWrapper : modelList
}
</code></pre>

<p><a href="http://blog.jobbole.com/109138/">扩展阅读：Sku 多维属性状态判断算法: http://blog.jobbole.com/109138/</a></p>


		</div>

		

	</article>
 
	<article>
		 <header>
		  	<h1 class="entry-title"><a href="15142582484169.html">Subline 使用教程</a></h1>
			<p class="meta"><time datetime="2017-12-26T11:17:28+08:00" 
			pubdate data-updated="true">2017/12/26</time></p>
		 </header>
	  	<div class="entry-content">
		  	
		  	<p><a href="http://www.imooc.com/learn/333">http://www.imooc.com/learn/333</a><br/>
<a href="http://www.imooc.com/learn/40">http://www.imooc.com/learn/40</a></p>


		</div>

		

	</article>
 
	<article>
		 <header>
		  	<h1 class="entry-title"><a href="15142581435408.html">切图教程</a></h1>
			<p class="meta"><time datetime="2017-12-26T11:15:43+08:00" 
			pubdate data-updated="true">2017/12/26</time></p>
		 </header>
	  	<div class="entry-content">
		  	
		  	<h3 id="toc_0">imooc 慕课网切图教程</h3>

<p><a href="http://www.imooc.com/learn/506">http://www.imooc.com/learn/506</a></p>


		</div>

		

	</article>
 
	<article>
		 <header>
		  	<h1 class="entry-title"><a href="15141927580252.html">高可用高性能可扩展的单号生成方案</a></h1>
			<p class="meta"><time datetime="2017-12-25T17:05:58+08:00" 
			pubdate data-updated="true">2017/12/25</time></p>
		 </header>
	  	<div class="entry-content">
		  	
		  	<p><a href="http://outofmemory.cn/wiki/sequence-gen">http://outofmemory.cn/wiki/sequence-gen</a></p>


		</div>

		

	</article>
 
	<article>
		 <header>
		  	<h1 class="entry-title"><a href="15141852086930.html">leetcode 解题大全</a></h1>
			<p class="meta"><time datetime="2017-12-25T15:00:08+08:00" 
			pubdate data-updated="true">2017/12/25</time></p>
		 </header>
	  	<div class="entry-content">
		  	
		  	<p><a href="http://bookshadow.com/leetcode/">http://bookshadow.com/leetcode/</a></p>

<p><a href="https://www.liuchuo.net/leetcode%E9%A2%98%E8%A7%A3%E7%9B%AE%E5%BD%95">https://www.liuchuo.net/leetcode%E9%A2%98%E8%A7%A3%E7%9B%AE%E5%BD%95</a></p>


		</div>

		

	</article>
 
	<article>
		 <header>
		  	<h1 class="entry-title"><a href="15117623974594.html">微信小程序：图片下方空隙，解决方法</a></h1>
			<p class="meta"><time datetime="2017-11-27T13:59:57+08:00" 
			pubdate data-updated="true">2017/11/27</time></p>
		 </header>
	  	<div class="entry-content">
		  	
		  	<blockquote>
<p><a href="http://www.cftea.com/c/2017/05/7961.asp">http://www.cftea.com/c/2017/05/7961.asp</a></p>
</blockquote>

<p>微信小程序本身就是基于 HTML、CSS，所以 <view><image></view> 这种情况下，也会出现网页的情况，图片下方与 view 下边框之间有空白。</p>

<p>解决办法和在 HTML、CSS 中一样。</p>

<p>法一、image { vertical-align:middle; }</p>

<p>法二、为 view 设置 height。</p>

<h1 id="toc_0">2C3E50</h1>


		</div>

		

	</article>
  
	<div class="pagination">
	
<a href="archives.html">Blog Archives</a>
	 
	    
	</div>
</div>
 <aside class="sidebar"> 

	<section>
	  <h1>Categories</h1>
	  <ul id="recent_posts">
	  
	      <li class="post">
	        <a href="%E5%96%84%E7%94%A8%E4%BD%B3%E8%BD%AF.html"><strong>善用佳软&nbsp;(1)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E7%A8%8B%E5%BA%8F%E6%9E%84%E5%BB%BA.html"><strong>程序构建&nbsp;(6)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E8%AE%A4%E7%9F%A5%E5%86%85%E7%9C%81.html"><strong>认知内省&nbsp;(3)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E4%BA%A7%E5%93%81%E5%95%86%E4%B8%9A.html"><strong>产品商业&nbsp;(2)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E5%89%8D%E7%AB%AF.html"><strong>前端&nbsp;(2)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0.html"><strong>机器学习&nbsp;(1)</strong></a>
	        
	        
	        
	      </li>
	  
	      <li class="post">
	        <a href="%E8%81%8C%E5%9C%BA%E7%AE%A1%E7%90%86.html"><strong>职场管理&nbsp;(1)</strong></a>
	        
	        
	        
	      </li>
	   
	  </ul>
	</section>
	<section>
	  <h1>Recent Posts</h1>
	  <ul id="recent_posts">
	  
	      
		      <li class="post">
		        <a href="15143577543811.html">Sku选项可用判断</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="15143577543887.html">工程师文化公司和有工程师的公司</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="15143577543915.html">2017 开年第一篇</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="15143577543944.html">2016年下半年恢复锻炼</a>
		      </li>
	     
	  
	      
		      <li class="post">
		        <a href="15143577543977.html">2016年其他小伙伴的感悟</a>
		      </li>
	     
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	  
	      
	   
	  </ul>
	</section>
	
</aside> </div></div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 -  -
  <span class="credit">Powered by <a target="_blank" href="http://www.mweb.im">MWeb</a> &nbsp;&nbsp; Theme by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>

  
    




</body>
</html>